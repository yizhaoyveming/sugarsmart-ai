# é¡¹ç›®æ¶æ„é‡æ„æŠ¥å‘Š

**é‡æ„æ—¶é—´**: 2025-12-05 00:40 UTC  
**é‡æ„ç±»å‹**: åŒ…é‡å‘½å + æ¶æ„é‡æ–°å®šä½  
**çŠ¶æ€**: âœ… é˜¶æ®µä¸€å®Œæˆ

---

## ğŸ¯ é‡æ„ç›®æ ‡

### é—®é¢˜è¯†åˆ«
1. **æœ¯è¯­æ··æ·†**: "Mobile" vs "App" ä¸æ˜ç¡®
2. **æ¶æ„å®šä½ä¸æ¸…**: Web ç«¯å’Œ App ç«¯çš„å…³ç³»æ¨¡ç³Š
3. **éœ€æ±‚å˜åŒ–**: Web ç«¯éœ€è¦æ•°æ®åˆ†æ + æµ‹è¯•æ¨¡æ‹ŸåŠŸèƒ½

### è§£å†³æ–¹æ¡ˆ
- âœ… é‡å‘½å `packages/mobile` â†’ `packages/app`
- âœ… æ˜ç¡®å®šä½ï¼šAppï¼ˆæ‚£è€…ç«¯ï¼‰ã€Webï¼ˆç®¡ç†+æµ‹è¯•ï¼‰
- ğŸš§ å¾…å®ç°ï¼šWeb ç«¯åŒæ¨¡å¼ï¼ˆç®¡ç†æ¨¡å¼ + æµ‹è¯•æ¨¡å¼ï¼‰

---

## âœ… å·²å®Œæˆçš„æ›´æ”¹

### 1. ç›®å½•é‡å‘½å

```bash
# æ‰§è¡Œçš„å‘½ä»¤
mv packages/mobile packages/app
```

**ç»“æœ**:
```
packages/
â”œâ”€â”€ app/          âœ… æ–°åç§° (åŸ mobile)
â”œâ”€â”€ web/          âœ… ä¿æŒä¸å˜
â”œâ”€â”€ shared/       âœ… ä¿æŒä¸å˜
â””â”€â”€ backend/      âœ… ä¿æŒä¸å˜
```

### 2. åŒ…åæ›´æ–°

**æ–‡ä»¶**: `packages/app/package.json`

```diff
{
- "name": "@sugarsmart/mobile",
+ "name": "@sugarsmart/app",
  "version": "1.0.0",
  ...
}
```

### 3. æ ¹é…ç½®æ›´æ–°

**æ–‡ä»¶**: `package.json`

```diff
"scripts": {
  "dev:web": "pnpm --filter @sugarsmart/web dev",
- "dev:app": "pnpm --filter @sugarsmart/mobile dev",
+ "dev:app": "pnpm --filter @sugarsmart/app dev",
  
- "build:app": "pnpm --filter @sugarsmart/mobile build",
+ "build:app": "pnpm --filter @sugarsmart/app build",
  
- "sync:app": "pnpm --filter @sugarsmart/mobile cap:sync",
+ "sync:app": "pnpm --filter @sugarsmart/app cap:sync",
  ...
}
```

---

## ğŸ“Š æ–°æ¶æ„å®šä½

### App ç«¯ï¼ˆæ‚£è€…ä½¿ç”¨ï¼‰

```
packages/app/
â”œâ”€â”€ ç›®æ ‡ç”¨æˆ·: ç³–å°¿ç—…æ‚£è€…
â”œâ”€â”€ å¹³å°: iOS + Android (Capacitor)
â”œâ”€â”€ åŠŸèƒ½:
â”‚   â”œâ”€â”€ é¥®é£Ÿè®°å½•
â”‚   â”œâ”€â”€ AI å¥åº·å»ºè®®
â”‚   â”œâ”€â”€ è¡€ç³–è¿½è¸ª
â”‚   â”œâ”€â”€ ä¸ªäººå¥åº·æ¡£æ¡ˆ
â”‚   â””â”€â”€ æ¯å‘¨å¥åº·æŠ¥å‘Š
â””â”€â”€ ç‰¹ç‚¹: ç§»åŠ¨ç«¯ä¼˜åŒ–ã€ç¦»çº¿æ”¯æŒã€ç®€æ´æ˜“ç”¨
```

### Web ç«¯ï¼ˆå†…éƒ¨ä½¿ç”¨ï¼‰

```
packages/web/
â”œâ”€â”€ ç›®æ ‡ç”¨æˆ·: åŒ»ç”Ÿã€ç®¡ç†å‘˜ã€è¿è¥äººå‘˜
â”œâ”€â”€ å¹³å°: Web æµè§ˆå™¨ï¼ˆæ¡Œé¢ç«¯ï¼‰
â”œâ”€â”€ åŠŸèƒ½:
â”‚   â”œâ”€â”€ æ¨¡å¼ 1: ç®¡ç†æ¨¡å¼ï¼ˆé»˜è®¤ï¼‰
â”‚   â”‚   â”œâ”€â”€ ç”¨æˆ·æ•°æ®åˆ†æ
â”‚   â”‚   â”œâ”€â”€ ç»Ÿè®¡æŠ¥è¡¨
â”‚   â”‚   â”œâ”€â”€ ç”¨æˆ·ç®¡ç†
â”‚   â”‚   â””â”€â”€ ç³»ç»Ÿé…ç½®
â”‚   â”‚
â”‚   â””â”€â”€ æ¨¡å¼ 2: æµ‹è¯•æ¨¡å¼ï¼ˆå¯åˆ‡æ¢ï¼‰
â”‚       â”œâ”€â”€ æ¨¡æ‹Ÿæ‚£è€…ç«¯ UI
â”‚       â”œâ”€â”€ è´¦å·å¿«é€Ÿåˆ‡æ¢
â”‚       â”œâ”€â”€ è®¾å¤‡æ¨¡æ‹Ÿ
â”‚       â””â”€â”€ åŠŸèƒ½æµ‹è¯•
â””â”€â”€ ç‰¹ç‚¹: æ•°æ®å¯†é›†ã€å¤æ‚æ“ä½œã€å¤šè§’è‰²æ”¯æŒ
```

### Shared åŒ…ï¼ˆå…±äº«ä»£ç ï¼‰

```
packages/shared/
â”œâ”€â”€ types/           # ç±»å‹å®šä¹‰
â”œâ”€â”€ utils/           # å·¥å…·å‡½æ•°
â”œâ”€â”€ api/             # API å®¢æˆ·ç«¯
â”œâ”€â”€ components/      # ğŸ†• å¾…æ·»åŠ ï¼šæ‚£è€…ç«¯ UI ç»„ä»¶
â”œâ”€â”€ pages/           # ğŸ†• å¾…æ·»åŠ ï¼šå®Œæ•´é¡µé¢ç»„ä»¶
â””â”€â”€ hooks/           # ğŸ†• å¾…æ·»åŠ ï¼šå…±äº« Hooks
```

---

## ğŸš€ å¯åŠ¨å‘½ä»¤å˜åŒ–

### ä¹‹å‰

```bash
# å¯åŠ¨ç§»åŠ¨ç«¯å¼€å‘æœåŠ¡å™¨
npm run dev:app
# å®é™…æ‰§è¡Œ: pnpm --filter @sugarsmart/mobile dev
```

### ç°åœ¨

```bash
# å¯åŠ¨ App ç«¯å¼€å‘æœåŠ¡å™¨
npm run dev:app
# å®é™…æ‰§è¡Œ: pnpm --filter @sugarsmart/app dev âœ…
```

**æ‰€æœ‰å‘½ä»¤ä¿æŒä¸å˜**ï¼Œå†…éƒ¨å¼•ç”¨å·²æ›´æ–°ï¼

---

## ğŸ”„ ä»£ç å¤ç”¨ç­–ç•¥ï¼ˆè§„åˆ’ï¼‰

### å½“å‰çŠ¶æ€
```
App ç«¯ â† shared (types + utils)
Web ç«¯ â† shared (types + utils)
```

### ç›®æ ‡çŠ¶æ€ï¼ˆä¸‹ä¸€é˜¶æ®µï¼‰
```
App ç«¯ â† shared (types + utils + components + pages)
             â†“
Web ç«¯(æµ‹è¯•æ¨¡å¼) â† å¤ç”¨ç›¸åŒçš„ components + pages
Web ç«¯(ç®¡ç†æ¨¡å¼) â† ç‹¬ç«‹çš„ç®¡ç†ç•Œé¢
```

---

## â­ï¸ ä¸‹ä¸€æ­¥å·¥ä½œ

### é˜¶æ®µ 2: é‡æ„ Shared åŒ…

**ç›®æ ‡**: å°† App ç«¯ç»„ä»¶æå–åˆ° sharedï¼Œä¾› Web æµ‹è¯•æ¨¡å¼å¤ç”¨

**ä»»åŠ¡æ¸…å•**:
- [ ] åˆ›å»º `packages/shared/src/components/` ç›®å½•
- [ ] åˆ›å»º `packages/shared/src/pages/` ç›®å½•
- [ ] ç§»åŠ¨ App ç«¯é€šç”¨ç»„ä»¶åˆ° shared
- [ ] ç§»åŠ¨ App ç«¯é¡µé¢ç»„ä»¶åˆ° shared
- [ ] æ›´æ–°å¯¼å…¥è·¯å¾„
- [ ] æ·»åŠ å…±äº« Hooks

**é¢„ä¼°æ—¶é—´**: 1-2 å°æ—¶

### é˜¶æ®µ 3: Web ç«¯åŒæ¨¡å¼æ”¹é€ 

**ç›®æ ‡**: å®ç°ç®¡ç†æ¨¡å¼ + æµ‹è¯•æ¨¡å¼åˆ‡æ¢

**ä»»åŠ¡æ¸…å•**:
- [ ] åˆ›å»ºæ¨¡å¼åˆ‡æ¢ç»„ä»¶ `ModeSwitch`
- [ ] å®ç°ç®¡ç†æ¨¡å¼ç•Œé¢ï¼ˆDashboardã€ç”¨æˆ·ç®¡ç†ç­‰ï¼‰
- [ ] å®ç°æµ‹è¯•æ¨¡å¼ç•Œé¢ï¼ˆæ‰‹æœºæ¨¡æ‹Ÿå™¨ + App ç»„ä»¶å¤ç”¨ï¼‰
- [ ] æ·»åŠ è´¦å·å¿«é€Ÿåˆ‡æ¢åŠŸèƒ½
- [ ] æ·»åŠ è®¾å¤‡æ¨¡æ‹Ÿå™¨
- [ ] æ·»åŠ è°ƒè¯•å·¥å…·é¢æ¿

**é¢„ä¼°æ—¶é—´**: 2-3 å°æ—¶

### é˜¶æ®µ 4: æ–‡æ¡£å’Œæµ‹è¯•

**ä»»åŠ¡æ¸…å•**:
- [ ] æ›´æ–° README.md
- [ ] åˆ›å»ºæ¶æ„æ–‡æ¡£
- [ ] æ›´æ–°å¼€å‘æŒ‡å—
- [ ] æ·»åŠ æµ‹è¯•ç”¨ä¾‹
- [ ] æ€§èƒ½ä¼˜åŒ–

**é¢„ä¼°æ—¶é—´**: 1 å°æ—¶

---

## ğŸ“ é…ç½®æ–‡ä»¶æ£€æŸ¥æ¸…å•

### âœ… å·²æ›´æ–°
- [x] `packages/app/package.json` - åŒ…åæ›´æ–°
- [x] `package.json` - è„šæœ¬æ›´æ–°

### âš ï¸ éœ€è¦æ£€æŸ¥ï¼ˆå¯èƒ½éœ€è¦æ›´æ–°ï¼‰
- [ ] `packages/app/capacitor.config.ts` - æ£€æŸ¥åŒ…åå¼•ç”¨
- [ ] `.github/workflows/build-android.yml` - æ£€æŸ¥è·¯å¾„å¼•ç”¨
- [ ] `pnpm-workspace.yaml` - åº”è¯¥è‡ªåŠ¨è¯†åˆ«
- [ ] `turbo.json` - æ£€æŸ¥ä»»åŠ¡å¼•ç”¨
- [ ] `README.md` - æ›´æ–°æ–‡æ¡£è¯´æ˜

---

## ğŸ§ª éªŒè¯æ­¥éª¤

### 1. éªŒè¯åŒ…é‡å‘½å

```bash
# æ£€æŸ¥ç›®å½•ç»“æ„
ls packages/

# æœŸæœ›è¾“å‡º:
# app/  backend/  shared/  web/
```

### 2. éªŒè¯ä¾èµ–å®‰è£…

```bash
# é‡æ–°å®‰è£…ä¾èµ–
pnpm install

# æ£€æŸ¥æ˜¯å¦æœ‰é”™è¯¯
```

### 3. éªŒè¯å¼€å‘æœåŠ¡å™¨

```bash
# å¯åŠ¨ App ç«¯
npm run dev:app

# æœŸæœ›ï¼šæˆåŠŸå¯åŠ¨åœ¨ 3001 ç«¯å£
```

### 4. éªŒè¯æ„å»º

```bash
# æ„å»º App ç«¯
npm run build:app

# æœŸæœ›ï¼šæ„å»ºæˆåŠŸï¼Œæ— é”™è¯¯
```

---

## ğŸ¯ æˆåŠŸæŒ‡æ ‡

### æŠ€æœ¯æŒ‡æ ‡
- âœ… ç›®å½•é‡å‘½åæˆåŠŸ
- âœ… åŒ…åæ›´æ–°æ­£ç¡®
- âœ… è„šæœ¬å‘½ä»¤æ­£å¸¸å·¥ä½œ
- â³ æ— ç ´åæ€§æ›´æ”¹ï¼ˆå¾…éªŒè¯ï¼‰
- â³ æ‰€æœ‰ä¾èµ–æ­£å¸¸è§£æï¼ˆå¾…éªŒè¯ï¼‰

### ä¸šåŠ¡æŒ‡æ ‡
- âœ… æœ¯è¯­æ›´æ¸…æ™°ï¼ˆApp vs Webï¼‰
- âœ… æ¶æ„å®šä½æ˜ç¡®
- ğŸš§ ä»£ç å¤ç”¨æå‡ï¼ˆå¾…å®ç°ï¼‰
- ğŸš§ æµ‹è¯•æ•ˆç‡æå‡ï¼ˆå¾…å®ç°ï¼‰

---

## ğŸ› æ½œåœ¨é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ

### é—®é¢˜ 1: Git å†å²è¿½è¸ª

**é—®é¢˜**: é‡å‘½åç›®å½•åï¼ŒGit å¯èƒ½æ— æ³•è¿½è¸ªæ–‡ä»¶å†å²

**è§£å†³æ–¹æ¡ˆ**:
```bash
# Git ä¼šè‡ªåŠ¨æ£€æµ‹é‡å‘½åï¼Œä½†éœ€è¦ç¡®è®¤
git status
git add .
git commit -m "refactor: é‡å‘½å mobile â†’ appï¼Œæ˜ç¡®åŒ…å®šä½"
```

### é—®é¢˜ 2: IDE å¼•ç”¨å¤±æ•ˆ

**é—®é¢˜**: VSCode å¯èƒ½ç¼“å­˜æ—§çš„åŒ…åå¼•ç”¨

**è§£å†³æ–¹æ¡ˆ**:
```bash
# é‡å¯ TypeScript æœåŠ¡å™¨
# VSCode: Ctrl+Shift+P â†’ "TypeScript: Restart TS Server"
```

### é—®é¢˜ 3: node_modules ç¼“å­˜

**é—®é¢˜**: pnpm å¯èƒ½ç¼“å­˜äº†æ—§çš„åŒ…é“¾æ¥

**è§£å†³æ–¹æ¡ˆ**:
```bash
# æ¸…ç†å¹¶é‡æ–°å®‰è£…
pnpm clean
rm -rf node_modules
pnpm install
```

---

## ğŸ“Š å¯¹æ¯”åˆ†æ

### é‡æ„å‰ âŒ

```
é—®é¢˜:
- âŒ "Mobile" æœ¯è¯­ä¸å¤Ÿç²¾ç¡®
- âŒ æ¶æ„å®šä½æ¨¡ç³Š
- âŒ Web å’Œ App å…³ç³»ä¸æ¸…
- âŒ æ— æ³•åœ¨ Web ç«¯æµ‹è¯• App åŠŸèƒ½

ç»“æ„:
packages/
â”œâ”€â”€ mobile/       # ä¸å¤Ÿæ˜ç¡®
â”œâ”€â”€ web/          # å®šä½ä¸æ¸…
â”œâ”€â”€ shared/       # ä»… types + utils
â””â”€â”€ backend/
```

### é‡æ„å âœ…

```
ä¼˜åŠ¿:
- âœ… "App" æœ¯è¯­æ¸…æ™°æ˜ç¡®
- âœ… æ¶æ„å®šä½æ˜ç¡®
- âœ… Web åŒæ¨¡å¼è®¾è®¡ï¼ˆç®¡ç†+æµ‹è¯•ï¼‰
- âœ… ä»£ç å¤ç”¨ç­–ç•¥æ¸…æ™°

ç»“æ„:
packages/
â”œâ”€â”€ app/          # æ‚£è€… Appï¼Œæ¸…æ™°æ˜ç¡®
â”œâ”€â”€ web/          # å†…éƒ¨å¹³å°ï¼ˆç®¡ç†+æµ‹è¯•ï¼‰
â”œâ”€â”€ shared/       # å³å°†æ‰©å±•
â””â”€â”€ backend/      # API æœåŠ¡
```

---

## ğŸ’¡ æœ€ä½³å®è·µå»ºè®®

### 1. å‘½åè§„èŒƒ

**å¥½çš„å‘½å** âœ…:
- `@sugarsmart/app` - æ˜ç¡®æ˜¯åº”ç”¨ç¨‹åº
- `@sugarsmart/admin-web` - æ˜ç¡®æ˜¯ç®¡ç†åå°
- `@sugarsmart/shared` - æ˜ç¡®æ˜¯å…±äº«ä»£ç 

**ä¸å¥½çš„å‘½å** âŒ:
- `@sugarsmart/mobile` - å¯èƒ½æ˜¯ mobile web
- `@sugarsmart/client` - ä¸å¤Ÿå…·ä½“
- `@sugarsmart/common` - å¤ªæ³›åŒ–

### 2. åŒ…èŒè´£åˆ’åˆ†

**å•ä¸€èŒè´£åŸåˆ™**:
- æ¯ä¸ªåŒ…åº”æœ‰æ˜ç¡®çš„ç›®æ ‡ç”¨æˆ·
- æ¯ä¸ªåŒ…åº”æœ‰æ¸…æ™°çš„åŠŸèƒ½èŒƒå›´
- é¿å…åŠŸèƒ½é‡å å’Œæ··æ·†

### 3. ä»£ç å¤ç”¨ç­–ç•¥

**åˆç†å¤ç”¨**:
- âœ… ç±»å‹å®šä¹‰ 100% å¤ç”¨
- âœ… ä¸šåŠ¡é€»è¾‘ 80-90% å¤ç”¨
- âœ… UI ç»„ä»¶ 60-70% å¤ç”¨
- âš ï¸ é¡µé¢å¸ƒå±€ æŒ‰éœ€å¤ç”¨
- âŒ å¹³å°ç‰¹å®šä»£ç  ä¸å¤ç”¨

---

## âœ… æ€»ç»“

### æœ¬æ¬¡é‡æ„æˆæœ

1. **æœ¯è¯­æ ‡å‡†åŒ–** âœ…
   - mobile â†’ appï¼ˆæ›´å‡†ç¡®ï¼‰
   - æ‰€æœ‰è„šæœ¬å‘½ä»¤æ›´æ–°

2. **æ¶æ„æ˜ç¡®åŒ–** âœ…
   - App ç«¯ = æ‚£è€…ä½¿ç”¨
   - Web ç«¯ = å†…éƒ¨ç®¡ç† + æµ‹è¯•

3. **åŸºç¡€å·¥ä½œå®Œæˆ** âœ…
   - ç›®å½•é‡å‘½å
   - é…ç½®æ›´æ–°
   - è„šæœ¬ä¿®æ­£

### åç»­è®¡åˆ’

**ä¼˜å…ˆçº§ P0**:
- éªŒè¯é‡å‘½ååçš„é¡¹ç›®æ­£å¸¸è¿è¡Œ
- é‡æ„ shared åŒ…æ·»åŠ  components

**ä¼˜å…ˆçº§ P1**:
- å®ç° Web ç«¯åŒæ¨¡å¼
- å®Œå–„æµ‹è¯•åŠŸèƒ½

**ä¼˜å…ˆçº§ P2**:
- æ–‡æ¡£å®Œå–„
- æ€§èƒ½ä¼˜åŒ–

---

**é‡æ„çŠ¶æ€**: âœ… é˜¶æ®µä¸€å®Œæˆ  
**ä¸‹ä¸€æ­¥**: éªŒè¯é¡¹ç›®è¿è¡Œ â†’ é‡æ„ shared åŒ…  
**é¢„è®¡å®Œæˆæ—¶é—´**: é˜¶æ®µäºŒ+ä¸‰ çº¦ 3-5 å°æ—¶
