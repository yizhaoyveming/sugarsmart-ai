# Web 端 UI 重构计划

**开始时间**: 2025-12-05 01:35 UTC  
**重构方案**: 方案 B - 分阶段渐进式重构  
**当前阶段**: 阶段 1 - 提取核心 UI 组件

---

## 📋 总体规划

### 阶段 1: 提取核心 UI 组件到 shared（2天）

#### 目标
- 将 App/Web 端共用的 UI 组件提取到 `packages/shared/src/components/`
- 减少代码重复
- 为后续的双模式实现打基础

#### 组件清单

**第一批（基础组件）**：
- [ ] Button.tsx - 通用按钮组件
- [ ] Input.tsx - 输入框组件
- [ ] Card.tsx - 卡片容器组件

**第二批（表单组件）**：
- [ ] InputRange.tsx - 范围滑块
- [ ] FilterChip.tsx - 筛选标签
- [ ] Select.tsx - 下拉选择

**第三批（展示组件）**：
- [ ] RecipeCard.tsx - 食谱卡片
- [ ] NutritionItem.tsx - 营养信息项
- [ ] NavLink.tsx - 导航链接

---

### 阶段 2: 实现 Web 端双模式（1-2天）

#### 2.1 模式切换框架
- [ ] 创建 ModeToggle 组件
- [ ] 实现模式状态管理

#### 2.2 测试模式（App 模拟器）
- [ ] 创建手机模拟器框架
- [ ] 复用 shared 组件
- [ ] 添加测试工具面板

#### 2.3 管理模式（基础）
- [ ] 创建管理后台布局
- [ ] 实现侧边栏导航
- [ ] 创建概览页面

---

### 阶段 3: 管理后台开发（按需）

**核心功能**：
- [ ] 用户列表查看
- [ ] 基础数据统计
- [ ] 系统设置

**扩展功能**（可选）：
- [ ] 高级数据分析
- [ ] 内容管理
- [ ] 权限系统

---

## 🚀 当前进度

### 已完成
- [x] 创建 shared/components 目录
- [ ] Button 组件提取（进行中...）

### 进行中
- 提取第一批基础组件

### 待办
- 更新 shared package.json 依赖
- 创建组件导出文件
- 在 App 端验证组件可用性

---

## 📦 依赖管理

### Shared 包需要添加的依赖

```json
{
  "dependencies": {
    "react": "^19.2.0",
    "react-dom": "^19.2.0",
    "react-router-dom": "^7.9.6",
    "lucide-react": "^0.555.0"
  },
  "devDependencies": {
    "typescript": "~5.8.2",
    "@types/react": "^19.0.0",
    "@types/react-dom": "^19.0.0"
  }
}
```

---

## 🎯 成功标准

### 阶段 1 完成标准
- ✅ 至少 5 个核心组件提取完成
- ✅ 组件在 shared 包中正确导出
- ✅ App 端成功引用并运行
- ✅ 无类型错误
- ✅ 功能与原来一致

### 阶段 2 完成标准
- ✅ Web 端可以切换管理/测试模式
- ✅ 测试模式显示手机模拟器
- ✅ 管理模式显示基础后台界面

---

## ⚠️ 注意事项

1. **不破坏现有功能**
   - 每提取一个组件都要测试
   - 保持向后兼容

2. **类型安全**
   - 所有组件都有完整的 TypeScript 类型
   - 导出的组件都有正确的类型定义

3. **样式处理**
   - 使用 Tailwind CSS 类名
   - 保持样式一致性

4. **渐进式重构**
   - 不急于求成
   - 每个阶段都要验证可用

---

## 📝 变更日志

### 2025-12-05
- 创建重构计划文档
- 创建 shared/components 目录
- 开始提取 Button 组件

---

**预计完成时间**: 阶段 1 - 2天  
**下一步**: 提取 Button、Input、Card 组件
