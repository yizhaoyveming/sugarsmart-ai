# ğŸš€ æ™ºç³–ç®¡å®¶AI - PM2æœåŠ¡ç®¡ç†æŒ‡å—

## âœ… å·²å®Œæˆé…ç½®

æ‰€æœ‰æœåŠ¡å·²é€šè¿‡PM2é…ç½®ä¸ºæŒä¹…åŒ–è¿è¡Œï¼Œ**å…³é—­VSCodeä¸ä¼šå½±å“æœåŠ¡è¿è¡Œ**ï¼

### ğŸ“‹ å½“å‰è¿è¡Œçš„æœåŠ¡

| æœåŠ¡åç§° | ç«¯å£ | çŠ¶æ€ | è¯´æ˜ |
|---------|------|------|------|
| sugarsmart-backend | 8080 | âœ… Running | åç«¯APIæœåŠ¡ |
| sugarsmart-web | 3000 | âœ… Running | Webç®¡ç†ç«¯ |
| sugarsmart-app | 3001 | âœ… Running | Appç§»åŠ¨ç«¯ |

---

## ğŸ¯ å¸¸ç”¨PM2å‘½ä»¤

### æŸ¥çœ‹æœåŠ¡çŠ¶æ€
```bash
pm2 list                    # æŸ¥çœ‹æ‰€æœ‰æœåŠ¡
pm2 status                  # åŒä¸Š
```

### æŸ¥çœ‹æ—¥å¿—
```bash
pm2 logs                    # æŸ¥çœ‹æ‰€æœ‰æœåŠ¡æ—¥å¿—ï¼ˆå®æ—¶ï¼‰
pm2 logs sugarsmart-backend # æŸ¥çœ‹åç«¯æ—¥å¿—
pm2 logs sugarsmart-web     # æŸ¥çœ‹Webç«¯æ—¥å¿—
pm2 logs sugarsmart-app     # æŸ¥çœ‹Appç«¯æ—¥å¿—
pm2 logs --lines 100        # æŸ¥çœ‹æœ€è¿‘100è¡Œæ—¥å¿—
```

### é‡å¯æœåŠ¡
```bash
pm2 restart all             # é‡å¯æ‰€æœ‰æœåŠ¡
pm2 restart sugarsmart-backend  # é‡å¯åç«¯
pm2 restart sugarsmart-web      # é‡å¯Webç«¯
pm2 restart sugarsmart-app      # é‡å¯Appç«¯
```

### åœæ­¢æœåŠ¡
```bash
pm2 stop all                # åœæ­¢æ‰€æœ‰æœåŠ¡
pm2 stop sugarsmart-backend # åœæ­¢åç«¯
pm2 stop sugarsmart-web     # åœæ­¢Webç«¯
pm2 stop sugarsmart-app     # åœæ­¢Appç«¯
```

### å¯åŠ¨æœåŠ¡
```bash
pm2 start ecosystem.config.js  # å¯åŠ¨æ‰€æœ‰æœåŠ¡ï¼ˆé¦–æ¬¡ï¼‰
pm2 start sugarsmart-backend   # å¯åŠ¨åç«¯
pm2 start sugarsmart-web       # å¯åŠ¨Webç«¯
pm2 start sugarsmart-app       # å¯åŠ¨Appç«¯
```

### åˆ é™¤æœåŠ¡
```bash
pm2 delete all              # åˆ é™¤æ‰€æœ‰æœåŠ¡
pm2 delete sugarsmart-backend  # åˆ é™¤åç«¯
```

### ç›‘æ§æœåŠ¡
```bash
pm2 monit                   # å®æ—¶ç›‘æ§ï¼ˆCPUã€å†…å­˜ç­‰ï¼‰
pm2 info sugarsmart-backend # æŸ¥çœ‹æœåŠ¡è¯¦ç»†ä¿¡æ¯
```

---

## ğŸ“Š æœåŠ¡è®¿é—®åœ°å€

### æœ¬åœ°å¼€å‘
- **åç«¯API**: http://localhost:8080
- **Webç®¡ç†ç«¯**: http://localhost:3000
- **Appç§»åŠ¨ç«¯**: http://localhost:3001

### çº¿ä¸Šéƒ¨ç½²ï¼ˆSealosï¼‰
- **åç«¯API**: https://jyrslunpgmyn.sealoshzh.site
- **Webç®¡ç†ç«¯**: https://ypgcihlwutgw.sealoshzh.site
- **Appç§»åŠ¨ç«¯**: https://xbpnaciwyekd.sealoshzh.site

---

## ğŸ“ æ—¥å¿—æ–‡ä»¶ä½ç½®

æ—¥å¿—æ–‡ä»¶ä¿å­˜åœ¨ï¼š`/home/devbox/project/logs/`

```
logs/
â”œâ”€â”€ backend-error.log    # åç«¯é”™è¯¯æ—¥å¿—
â”œâ”€â”€ backend-out.log      # åç«¯è¾“å‡ºæ—¥å¿—
â”œâ”€â”€ web-error.log        # Webç«¯é”™è¯¯æ—¥å¿—
â”œâ”€â”€ web-out.log          # Webç«¯è¾“å‡ºæ—¥å¿—
â”œâ”€â”€ app-error.log        # Appç«¯é”™è¯¯æ—¥å¿—
â””â”€â”€ app-out.log          # Appç«¯è¾“å‡ºæ—¥å¿—
```

æŸ¥çœ‹æ—¥å¿—æ–‡ä»¶ï¼š
```bash
tail -f logs/backend-out.log  # å®æ—¶æŸ¥çœ‹åç«¯æ—¥å¿—
tail -f logs/web-out.log      # å®æ—¶æŸ¥çœ‹Webç«¯æ—¥å¿—
tail -f logs/app-out.log      # å®æ—¶æŸ¥çœ‹Appç«¯æ—¥å¿—
```

---

## âš¡ å¿«é€Ÿæ“ä½œ

### ä¿®æ”¹ä»£ç åé‡å¯æœåŠ¡
```bash
cd /home/devbox/project
pm2 restart all
```

### å‡ºç°é—®é¢˜æ—¶æŸ¥çœ‹æ—¥å¿—
```bash
pm2 logs --lines 50
```

### æœåŠ¡å´©æºƒè‡ªåŠ¨é‡å¯
PM2å·²é…ç½®è‡ªåŠ¨é‡å¯ï¼Œæ— éœ€æ‰‹åŠ¨å¹²é¢„ã€‚å¦‚æœæœåŠ¡å´©æºƒï¼š
- ä¼šè‡ªåŠ¨å°è¯•é‡å¯ï¼ˆæœ€å¤š10æ¬¡ï¼‰
- æ¯æ¬¡é‡å¯é—´éš”3ç§’

---

## ğŸ”§ é…ç½®æ–‡ä»¶

PM2é…ç½®æ–‡ä»¶ï¼š`/home/devbox/project/ecosystem.config.js`

å¦‚éœ€ä¿®æ”¹é…ç½®ï¼ˆç«¯å£ã€ç¯å¢ƒå˜é‡ç­‰ï¼‰ï¼š
1. ç¼–è¾‘ `ecosystem.config.js`
2. é‡å¯æœåŠ¡ï¼š`pm2 restart all`
3. ä¿å­˜é…ç½®ï¼š`pm2 save`

---

## âœ¨ ç‰¹æ€§

### âœ… å·²é…ç½®åŠŸèƒ½
- âœ… **æŒä¹…åŒ–è¿è¡Œ**ï¼šå…³é—­VSCodeä¸å½±å“æœåŠ¡
- âœ… **å¼€æœºè‡ªå¯åŠ¨**ï¼šDevBoxé‡å¯åè‡ªåŠ¨å¯åŠ¨æœåŠ¡
- âœ… **è‡ªåŠ¨é‡å¯**ï¼šæœåŠ¡å´©æºƒè‡ªåŠ¨é‡å¯
- âœ… **æ—¥å¿—è®°å½•**ï¼šæ‰€æœ‰æ—¥å¿—è‡ªåŠ¨ä¿å­˜
- âœ… **è¿›ç¨‹ç›‘æ§**ï¼šå®æ—¶æŸ¥çœ‹CPUã€å†…å­˜ä½¿ç”¨

### ğŸ¯ ä¼˜åŠ¿
- ä¸ä¾èµ–VSCodeä¼šè¯
- ä¸ä¾èµ–ç»ˆç«¯çª—å£
- 24å°æ—¶ç¨³å®šè¿è¡Œ
- å¼€å‘ä½“éªŒå‹å¥½

---

## â“ å¸¸è§é—®é¢˜

### Q1: å…³é—­VSCodeåæœåŠ¡è¿˜åœ¨è¿è¡Œå—ï¼Ÿ
**A**: âœ… æ˜¯çš„ï¼PM2ç®¡ç†çš„æœåŠ¡ä¸ä¾èµ–VSCodeï¼Œå…³é—­åä»ç„¶è¿è¡Œã€‚

### Q2: å¦‚ä½•ç¡®è®¤æœåŠ¡æ­£åœ¨è¿è¡Œï¼Ÿ
**A**: è¿è¡Œ `pm2 list`ï¼Œstatusæ˜¾ç¤º"online"å³æ­£å¸¸è¿è¡Œã€‚

### Q3: å¦‚ä½•å®Œå…¨åœæ­¢æ‰€æœ‰æœåŠ¡ï¼Ÿ
**A**: è¿è¡Œ `pm2 stop all` æˆ– `pm2 delete all`

### Q4: DevBoxé‡å¯åæœåŠ¡ä¼šè‡ªåŠ¨å¯åŠ¨å—ï¼Ÿ
**A**: âœ… æ˜¯çš„ï¼å·²é…ç½®systemdå¼€æœºè‡ªå¯åŠ¨ã€‚

### Q5: å¦‚ä½•æŸ¥çœ‹æœåŠ¡æ˜¯å¦æœ‰é”™è¯¯ï¼Ÿ
**A**: è¿è¡Œ `pm2 logs` æŸ¥çœ‹å®æ—¶æ—¥å¿—ï¼Œæˆ–æŸ¥çœ‹logsç›®å½•ä¸‹çš„é”™è¯¯æ—¥å¿—æ–‡ä»¶ã€‚

---

## ğŸ‰ æµ‹è¯•éªŒè¯

ç°åœ¨å¯ä»¥æµ‹è¯•ï¼š
1. **å…³é—­VSCode**
2. **åœ¨æµè§ˆå™¨è®¿é—®**ï¼š
   - http://localhost:3000 ï¼ˆWebç«¯ï¼‰
   - http://localhost:3001 ï¼ˆAppç«¯ï¼‰
3. **æœåŠ¡ä»ç„¶å¯è®¿é—®ï¼** âœ…

---

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœ‰é—®é¢˜ï¼Œè¯·æŸ¥çœ‹ï¼š
- PM2æ—¥å¿—ï¼š`pm2 logs`
- é”™è¯¯æ—¥å¿—ï¼š`logs/xxx-error.log`
- PM2å®˜æ–¹æ–‡æ¡£ï¼šhttps://pm2.keymetrics.io/

---

**ğŸŠ æ­å–œï¼æ‚¨çš„æœåŠ¡å·²æˆåŠŸé…ç½®ä¸ºæŒä¹…åŒ–è¿è¡Œï¼**
